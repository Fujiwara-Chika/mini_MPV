#!/bin/sh

# mpv 快捷键绑定（keybindings）
# 默认快捷键硬编码在 mpv 二进制中，可用 --no-input-default-bindings 全部禁用
# 用 'ignore' 可彻底解绑某键，例：'ctrl+a ignore'

1   set speed 1           # 常速
2   set speed 2           # 2 倍速
3   set speed 3           # 3 倍速
4   set speed 4           # 4 倍速

j   add speed +0.5        # 倍速 +0.5
k   add speed -0.5        # 倍速 -0.5

q   quit                  # 退出播放器

l   ab-loop               # 设置/清除 A-B 循环点
,   frame-back-step       # 上一帧
.   frame-step            # 下一帧

m   cycle mute            # 静音切换
t   cycle ontop           # 置顶切换
f   cycle fullscreen      # 全屏切换
u   cycle-values sub-ass-override "force" "no"   # 强制/关闭 ASS 样式
L   cycle-values loop-file "inf" "no"            # 单曲循环开关
e   cycle secondary-sid   # 切换第二字幕轨道
v   cycle sub-visibility  # 字幕显隐

z   add sub-pos -1        # 字幕上移 1 像素
Z   add sub-pos +1        # 字幕下移 1 像素
x   add sub-scale -0.1    # 字幕缩小 10 %
X   add sub-scale +0.1    # 字幕放大 10 %
d   add sub-delay -0.1    # 字幕提前 0.1 秒
D   add sub-delay +0.1    # 字幕延后 0.1 秒

-   add volume -2         # 音量减 2 %
=   add volume +2         # 音量加 2 %

`   script-binding console/enable         		# 打开控制台
i   script-binding stats/display-stats    		# 临时显示统计信息
I   script-binding stats/display-stats-toggle   # 统计信息开关

# a   script-binding slicing_audio       # 保留音频的循环切片
p   script-binding slicing_mark        # 标记切片起点/终点
P   script-binding clear_slicing_mark  # 清除切片标记
c   script-binding copy-current-image  # 复制当前画面到目标目录

s       screenshot              # 截图（含字幕）
S       screenshot video        # 截图（纯画面）
ALt+s   screenshot window       # 截图（窗口含字幕+OSD）
# ALt+s   screenshot each-frame   # 逐帧截图

<       playlist-prev           # 上一个文件
>       playlist-next           # 下一个文件
ENTER   playlist-next           # 下一个文件（回车）

SPACE   cycle pause             # 播放/暂停

LEFT    seek -5                 # 左箭头 后退 5 秒
RIGHT   seek +5                 # 右箭头 前进 5 秒
DOWN    seek -60 exact          # 下箭头 后退 60 秒（精准）
UP      seek +60 exact          # 上箭头 前进 60 秒（精准）

ESC     set fullscreen no       # 退出全屏

Ctrl+h  cycle-values hwdec "no" "auto"  # 硬解开关

Ctrl+a  cycle audio             # 音轨循环
Ctrl+s  cycle sub               # 字幕循环

Alt+LEFT       add chapter -1   # 上一章节
Alt+RIGHT      add chapter +1   # 下一章节

Shift+LEFT     sub-seek -1      # 跳到前一条字幕
Shift+RIGHT    sub-seek +1      # 跳到下一条字幕

SHIFT+ENTER    script-binding playlistmanager/showplaylist  # 显示播放列表

MBTN_LEFT      ignore           # 左键单击无操作（防止误触）
MBTN_LEFT_DBL  cycle fullscreen # 左键双击 全屏切换
MBTN_RIGHT     cycle pause      # 右键单击 播放/暂停
MBTN_BACK      playlist-prev    # 鼠标侧键后退 上一个文件
MBTN_FORWARD   playlist-next    # 鼠标侧键前进 下一个文件

# Alt + 1~5 快速切换 GLSL 着色器
Alt+1 no-osd change-list glsl-shaders clr ""; show-text "GLSL shaders cleared"
Alt+2 no-osd change-list glsl-shaders set "~~/shaders/Anime4K_Restore_CNN_S.glsl"; show-text "Anime4K_Restore_S"
Alt+3 no-osd change-list glsl-shaders set "~~/shaders/Anime4K_Upscale_CNN_x2_S.glsl"; show-text "Anime4K_Upscale_S"
Alt+4 no-osd change-list glsl-shaders set "~~/shaders/Anime4K_Restore_CNN_M.glsl"; show-text "Anime4K_Restore_M"
Alt+5 no-osd change-list glsl-shaders set "~~/shaders/Anime4K_Upscale_CNN_x2_M.glsl"; show-text "Anime4K_Upscale_M"

# [书签菜单] 已注释，需配合脚本使用
# B         script_message bookmarker-menu        # 显示书签列表
# b         script_message bookmarker-quick-save  # 快速添加书签
# Alt+o   script_message locate-current-file      # 定位当前文件
# ctrl+b  script_message bookmarker-quick-load    # 快速加载书签